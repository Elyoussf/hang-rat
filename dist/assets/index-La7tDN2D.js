(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const f of l.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function e(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=e(o);fetch(o.href,l)}})();class x{constructor(t){this.elements=[],this.compare=t??((e,s)=>e.priority<s.priority)}leftChild(t){return 2*t+1}rightChild(t){return 2*t+2}parent(t){return Math.floor((t-1)/2)}swap(t,e){[this.elements[t],this.elements[e]]=[this.elements[e],this.elements[t]]}heapifyUp(t){for(;t>0&&this.compare(this.elements[t],this.elements[this.parent(t)]);)this.swap(t,this.parent(t)),t=this.parent(t)}heapifyDown(t){const e=this.elements.length;for(;;){let s=t;const o=this.leftChild(t),l=this.rightChild(t);if(o<e&&this.compare(this.elements[o],this.elements[s])&&(s=o),l<e&&this.compare(this.elements[l],this.elements[s])&&(s=l),s!==t)this.swap(t,s),t=s;else break}}enqueue(t,e){const s={value:t,priority:e};this.elements.push(s),this.heapifyUp(this.elements.length-1)}isEmpty(){return this.elements.length===0}dequeue(){if(this.isEmpty())return null;const t=this.elements[0],e=this.elements.pop();return this.isEmpty()||(this.elements[0]=e,this.heapifyDown(0)),t.value}size(){return this.elements.length}peek(){return this.isEmpty()?null:this.elements[0].value}print(){console.log(this.elements.map(t=>`(${t.value}, p:${t.priority})`).join(" "))}}function b(i,t){return Math.abs(i.x-t.x)+Math.abs(i.y-t.y)}function C(i,t){return i.x===t.x&&i.y===t.y}function I(i){return`${i.x},${i.y}`}function v(i,t,e){const s=[];let o=t;for(;!C(o,e);){s.push(o);const l=i.get(I(o));if(!l)break;o=l}return s.push(e),s.reverse()}function L(i,t,e){const s=new x,o=new Map,l=new Map,f=I(i);l.set(f,0),i.f=b(t,i),s.enqueue(i,i.f);const g=[[0,1],[1,0],[0,-1],[-1,0],[1,1],[-1,-1],[-1,1],[1,-1]];for(;!s.isEmpty();){const u=s.dequeue();if(!u)break;if(C(u,t))return v(o,u,i);for(const[E,w]of g){const h=u.x+E,m=u.y+w;if(h<0||m<0||h>=e.length||m>=e[0].length||e[h][m]?.obstacle)continue;const d=e[h][m];if(!d)continue;const y=l.get(I(u));if(y===void 0)continue;const p=y+1,n=I(d),r=l.get(n);(r===void 0||p<r)&&(o.set(n,u),l.set(n,p),d.f=p+b(t,d),s.enqueue(d,d.f))}}return null}window.appInitialized=!1;try{let w=function(){if(!i)throw new Error("Canvas element not found");i.width=Math.max(window.innerWidth-40,800),i.height=Math.max(window.innerHeight-40,600);const n=Math.floor(i.height/e),r=Math.floor(i.width/e);s=Array(r).fill(null).map((c,a)=>Array(n).fill(null).map((_,B)=>({x:a,y:B,f:0,obstacle:!1}))),h(),p()},h=function(){t.clearRect(0,0,i.width,i.height);for(let n=0;n<s.length;n++)for(let r=0;r<s[0].length;r++){const c=s[n][r];c&&(c.obstacle&&(t.fillStyle="#333",t.fillRect(n*e,r*e,e,e)),o&&n===o.x&&r===o.y&&(t.fillStyle="#2ecc71",t.fillRect(n*e,r*e,e,e)),l&&n===l.x&&r===l.y&&(t.fillStyle="#e74c3c",t.fillRect(n*e,r*e,e,e)))}t.strokeStyle="#ccc",t.lineWidth=1;for(let n=0;n<=i.width;n+=e)t.beginPath(),t.moveTo(n,0),t.lineTo(n,i.height),t.stroke();for(let n=0;n<=i.height;n+=e)t.beginPath(),t.moveTo(0,n),t.lineTo(i.width,n),t.stroke()},m=function(n,r=0){if(r>=n.length)return;const c=n[r];t.fillStyle="rgba(52, 152, 219, 0.5)",t.fillRect(c.x*e,c.y*e,e,e),t.strokeStyle="#ccc",t.strokeRect(c.x*e,c.y*e,e,e),E=requestAnimationFrame(()=>{m(n,r+1)})},d=function(){if(!(!o||!l)){E&&cancelAnimationFrame(E);try{const n=L(o,l,s);n?(h(),m(n),document.getElementById("status").textContent="Path found!"):(document.getElementById("status").textContent="No path found!",console.log("No path found!"))}catch(n){console.error("Pathfinding error:",n),document.getElementById("status").textContent="Error in pathfinding"}}},y=function(n,r){return{x:Math.floor(n/e),y:Math.floor(r/e)}},p=function(){document.getElementById("setStart").addEventListener("click",()=>{g=!0,u=!1,f=!1,document.getElementById("status").textContent="Click on grid to set start point"}),document.getElementById("setEnd").addEventListener("click",()=>{u=!0,g=!1,f=!1,document.getElementById("status").textContent="Click on grid to set end point"}),document.getElementById("drawWalls").addEventListener("click",()=>{f=!0,g=!1,u=!1,document.getElementById("status").textContent="Click and drag to draw walls"}),document.getElementById("clearWalls").addEventListener("click",()=>{for(let n=0;n<s.length;n++)for(let r=0;r<s[0].length;r++)s[n][r]&&(s[n][r].obstacle=!1);h(),d(),document.getElementById("status").textContent="Walls cleared"}),i.addEventListener("mousedown",n=>{const r=i.getBoundingClientRect(),{x:c,y:a}=y(n.clientX-r.left,n.clientY-r.top);c<0||a<0||c>=s.length||a>=s[0].length||(g?(o=s[c][a],g=!1,document.getElementById("status").textContent="Start point set"):u?(l=s[c][a],u=!1,document.getElementById("status").textContent="End point set"):f&&s[c][a]&&(s[c][a].obstacle=!s[c][a].obstacle),h(),d())}),i.addEventListener("mousemove",n=>{if(!f)return;const r=i.getBoundingClientRect(),{x:c,y:a}=y(n.clientX-r.left,n.clientY-r.top);c<0||a<0||c>=s.length||a>=s[0].length||s[c][a]&&n.buttons===1&&(s[c][a].obstacle=!0,h(),d())}),window.addEventListener("resize",()=>{w(),document.getElementById("status").textContent="Window resized - grid reset"})};var S=w,k=h,M=m,P=d,R=y,q=p;const i=document.getElementById("game"),t=i.getContext("2d"),e=32;let s=[],o=null,l=null,f=!1,g=!1,u=!1,E=null;w(),window.appInitialized=!0}catch(i){console.error("Application initialization failed:",i),document.getElementById("status").textContent=`Error: ${i.message}`,document.getElementById("status").style.backgroundColor="#ffebee",document.getElementById("status").style.color="#c62828";const t=document.getElementById("loader");t&&(t.style.display="none")}
